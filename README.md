# Дипломная работа выполнена по окончанию курса Yandex.Practicum "Go-разработчик"

# Задача 
Создание системы лояльности, позволяющей управлять бонусными баллами от покупок для пользователей.
Система: 
- получает информацию о покупках клиента, 
- запрашивает у стороннего сервиса количество бонусных баллов за эту покупку (сервис критичен к количеству запросов в минуту),
- начисляет баллы на счет клиента,
- при запросе на списание баллов, списывает баллы со счета. 

# Комментарии к структуре проекта
```
api/server - инициализация и остановка http сервера
api/middleware/auth - аутентификация запросов
api/handler
- balance - эндпоинты работы с балансом и списаниями баллов
- order - эндпоинты работы с заказами, на которые начисляются бонусные баллы
- authentication - эндпоинты авторизации на базе JWT токенов
- router - роутинг (chi)

provider/accrual - провайдер для подключения к сервису расчета бонусов

services
- accrual - воркер обслуживающий соединение с сервисом расчета бонусов. Количество подключений в секунду ограничивается rate.Limiter. При получении веб-клиентом 429(to many requests) парсит полученную ошибку, встает на указанную паузу и перенастраивает rate.Limiter
- auth - логика работы с пользователями
- order - логика работы с входящими заказами, на которые начисляются баллы
- withdraw - логика работы со списаниями баллов и балансом счета клиента
- httpclient - интерфейс http клиента и моки для тестирования

storage - интерфейс хранилища и реализации
- psql - реализация PostgreSQL хранилища
- psql/testtools - тестовый docker контейнер PostgreSQL для suite тестов БД
- psql/migrations - инструменты миграции БД

pkg
- luhn - валидация номеров заказов по алгоритму Luhn-а
- config - конфигурирование сервиса с помощью флагов и переменных среды.

migrations - файлы миграций БД
cmd/accrual - сервис отдающий информацию по бонусам, представлен в задании как бинарный файл, инициализируется через 'make accrual'
```